name: ðŸ” Diagnostika SFTP Cesty

on:
  workflow_dispatch:  # SpustÃ­ se manuÃ¡lnÄ›

jobs:
  diagnose-sftp:
    runs-on: ubuntu-latest
    name: ðŸ” Zjistit SFTP Cestu

    steps:
      - name: ðŸ” Diagnostika SFTP pÅ™Ã­stupu
        uses: appleboy/ssh-action@v1.0.0
        with:
          host: ${{ secrets.FTP_HOST }}
          username: ${{ secrets.FTP_USERNAME }}
          password: ${{ secrets.FTP_PASSWORD }}
          port: 22
          script: |
            echo "=== ðŸ” SFTP/SSH DIAGNOSTIKA ==="
            echo ""

            echo "1ï¸âƒ£ AktuÃ¡lnÃ­ adresÃ¡Å™ (pwd):"
            pwd
            echo ""

            echo "2ï¸âƒ£ DomovskÃ½ adresÃ¡Å™ (\$HOME):"
            echo $HOME
            echo ""

            echo "3ï¸âƒ£ Obsah aktuÃ¡lnÃ­ho adresÃ¡Å™e (ls -la):"
            ls -la
            echo ""

            echo "4ï¸âƒ£ HledÃ¡nÃ­ www sloÅ¾ek:"
            find . -maxdepth 3 -type d -name "www" 2>/dev/null || echo "Å½Ã¡dnÃ© www sloÅ¾ky nenalezeny"
            echo ""

            echo "5ï¸âƒ£ HledÃ¡nÃ­ photocustomer.php:"
            find . -maxdepth 5 -name "photocustomer.php" 2>/dev/null || echo "photocustomer.php nenalezen"
            echo ""

            echo "6ï¸âƒ£ HledÃ¡nÃ­ wgs-service.cz sloÅ¾ek:"
            find . -maxdepth 3 -type d -name "*wgs-service*" 2>/dev/null || echo "wgs-service sloÅ¾ky nenalezeny"
            echo ""

            echo "7ï¸âƒ£ AbsolutnÃ­ cesta k photocustomer.php (pokud existuje):"
            find . -name "photocustomer.php" -exec readlink -f {} \; 2>/dev/null || echo "Nelze zjistit absolutnÃ­ cestu"
            echo ""

            echo "=== âœ… DIAGNOSTIKA DOKONÄŒENA ==="
