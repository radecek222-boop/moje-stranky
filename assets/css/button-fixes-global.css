/**
 * BUTTON-FIXES-GLOBAL.CSS
 * Globalni opravy tlacictek pro mobilni zobrazeni
 *
 * Resene problemy:
 * - Minimalni touch target 44x44px (iOS doporuceni)
 * - Automaticke prizpusobeni velikosti textu
 * - Text overflow handling
 * - Font-size minimum 14px pro citelnost
 *
 * Datum: 2025-11-27
 */

/* ============================================================================
   ZAKLADNI TLACITKA - GLOBALNI PRAVIDLA
   ============================================================================ */

/* Vsechna tlacitka maji minimalni touch target */
button,
.btn,
input[type="button"],
input[type="submit"],
a.btn {
  min-height: 44px;
  min-width: 44px;

  /* Flexibilni font-size - minimum 14px, maximum 16px */
  font-size: clamp(0.875rem, 2.5vw, 1rem); /* 14px - 16px */

  /* Text se vejde do tlacitka */
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;

  /* Centrovani obsahu */
  display: inline-flex;
  align-items: center;
  justify-content: center;

  /* Touch optimalizace */
  touch-action: manipulation;
  -webkit-tap-highlight-color: transparent;

  /* Padding pro dostatecny prostor */
  padding: 0.75rem 1.25rem;

  /* Prechod pro hover efekty */
  transition: all 0.2s ease;
}

/* Tlacitka s dlouhym textem - povolime zalamovani */
button.btn-multiline,
.btn.btn-multiline,
.btn-wrap {
  white-space: normal;
  text-align: center;
  line-height: 1.3;
  min-height: 48px; /* Vice radku = vice prostoru */
}

/* ============================================================================
   MALA TLACITKA (btn-sm) - STALE DOSTATECNE VELKA
   ============================================================================ */

.btn-sm,
.btn-small,
button.btn-sm {
  min-height: 44px !important;
  min-width: 44px !important;
  font-size: clamp(0.8125rem, 2vw, 0.875rem) !important; /* 13px - 14px */
  padding: 0.5rem 1rem !important;
}

/* ============================================================================
   ZAVIRACI TLACITKA (X, Close)
   ============================================================================ */

.modal-close,
.close-btn,
.btn-close,
button[aria-label="Close"],
button[aria-label="Zavrit"],
[class*="close-btn"],
[class*="-close"] {
  min-width: 44px !important;
  min-height: 44px !important;
  width: 44px;
  height: 44px;

  /* Kruhove pro lepsi trefitelnost */
  border-radius: 50%;

  /* Velky X symbol */
  font-size: 1.5rem;
  line-height: 1;

  /* Centrovani */
  display: flex !important;
  align-items: center;
  justify-content: center;

  padding: 0;
}

/* ============================================================================
   IKONA TLACITKA (pouze ikona, zadny text)
   ============================================================================ */

.btn-icon,
.icon-btn,
button:has(svg):not(:has(*:not(svg))),
button:has(i):not(:has(*:not(i))) {
  min-width: 44px;
  min-height: 44px;
  padding: 0.5rem;

  /* Ikonka se prizpusobi */
  display: inline-flex;
  align-items: center;
  justify-content: center;
}

.btn-icon svg,
.icon-btn svg,
button svg {
  width: clamp(18px, 4vw, 24px);
  height: clamp(18px, 4vw, 24px);
  flex-shrink: 0;
}

/* ============================================================================
   MOBILNI SPECIFICKA PRAVIDLA
   ============================================================================ */

@media (max-width: 768px) {
  /* Vsechna tlacitka na mobilu */
  button,
  .btn,
  input[type="button"],
  input[type="submit"],
  a.btn {
    /* Vetsi minimalni vyska pro pohodlne klikani */
    min-height: 48px;

    /* Font-size nikdy pod 14px */
    font-size: max(0.875rem, 14px) !important;

    /* Plna sirka na velmi malych obrazovkach */
    /* (pouze pokud je uvnitr flex/grid kontejneru) */
  }

  /* Tlacitka v radku - flexibilni sirka */
  .btn-group button,
  .button-row button,
  .form-actions button {
    flex: 1 1 auto;
    min-width: 0; /* Umozni zmenseni */
  }

  /* Text v tlacitku se prizpusobi */
  button span,
  .btn span {
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
  }

  /* Zaviraci tlacitka jeste vetsi na mobilu */
  .modal-close,
  .close-btn,
  .btn-close {
    min-width: 48px !important;
    min-height: 48px !important;
    width: 48px;
    height: 48px;
  }
}

/* Extra male obrazovky (iPhone SE, apod.) */
@media (max-width: 375px) {
  button,
  .btn {
    /* Zmensime padding pro useteni mista */
    padding: 0.625rem 1rem;

    /* Font se muze zmensi o neco vic */
    font-size: clamp(0.8125rem, 3vw, 0.9375rem) !important; /* 13px - 15px */
  }

  /* Tlacitka v radku - plna sirka */
  .form-actions {
    flex-direction: column;
    gap: 0.5rem;
  }

  .form-actions button,
  .form-actions .btn {
    width: 100%;
  }
}

/* ============================================================================
   SPECIFICKE OPRAVY PRO EXISTUJICI KOMPONENTY
   ============================================================================ */

/* Calculator Modal Close Button */
.calculator-modal-close {
  width: 44px !important;
  height: 44px !important;
  min-width: 44px;
  min-height: 44px;
  font-size: 1.75rem;
}

/* Translate Button v protokolu */
.translate-btn {
  width: 44px !important;
  height: 44px !important;
  min-width: 44px;
  min-height: 44px;
}

/* Welcome Modal Close */
.welcome-close-btn {
  min-height: 48px;
  font-size: clamp(0.8125rem, 2.5vw, 0.9375rem); /* 13px - 15px */
}

/* CC Actions v Admin */
.cc-actions .btn,
.cc-actions button,
.cc-actions a.btn {
  min-height: 44px !important;
  font-size: clamp(0.75rem, 2vw, 0.875rem) !important; /* 12px - 14px */
  padding: 0.5rem 0.75rem !important;
}

/* Protocol Buttons */
.btns button.btn {
  font-size: clamp(0.75rem, 2.5vw, 0.875rem) !important; /* 12px - 14px */
  min-height: 44px;
}

/* Calendar Modal Buttons */
.calendar-btn,
.calendar-nav button {
  min-height: 44px;
  min-width: 44px;
  font-size: 1rem;
}

/* Time Slot Buttons */
.time-slot,
.time-slot-btn {
  min-height: 48px;
  font-size: 0.9375rem; /* 15px */
}

/* ============================================================================
   PRISTUPNOST - FOCUS STAVY
   ============================================================================ */

button:focus-visible,
.btn:focus-visible,
input[type="button"]:focus-visible,
input[type="submit"]:focus-visible {
  outline: 3px solid rgba(0, 0, 0, 0.5);
  outline-offset: 2px;
}

/* ============================================================================
   ANIMACE PRO TOUCH FEEDBACK
   ============================================================================ */

@media (hover: none) and (pointer: coarse) {
  /* Touch zarizeni - zadne hover efekty */
  button:hover,
  .btn:hover {
    transform: none;
  }

  /* Active state jako feedback */
  button:active,
  .btn:active {
    transform: scale(0.97);
    opacity: 0.9;
  }
}
