async function getCSRFToken(){if(window.csrfTokenCache)return window.csrfTokenCache;try{const n=await fetch("/app/controllers/get_csrf_token.php",{credentials:"same-origin"}),e=await n.json();return"success"===e.status&&e.token?(window.csrfTokenCache=e.token,e.token):null}catch(n){return console.error("CSRF Error:",n),null}}function showCsrfError(n){if(document.getElementById("csrf-warning"))return;const e=document.createElement("div");e.id="csrf-warning",e.className="csrf-error-notification",e.innerHTML=`\n        <strong>Bezpečnostní upozornění</strong>\n        <p>${n}</p>\n        <button onclick="location.reload()">Obnovit stránku</button>\n    `,e.style.cssText='\n        position: fixed;\n        top: 20px;\n        left: 50%;\n        transform: translateX(-50%);\n        z-index: 10003;\n        background: linear-gradient(135deg, #333 0%, #555 100%);\n        color: white;\n        padding: 20px 25px;\n        border-radius: 8px;\n        box-shadow: 0 6px 20px rgba(0,0,0,0.4);\n        max-width: 400px;\n        width: 90%;\n        text-align: center;\n        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;\n        animation: slideDown 0.3s ease-out;\n    ';const t=e.querySelector("strong");t&&(t.style.cssText="display: block; font-size: 1.1rem; margin-bottom: 8px;");const o=e.querySelector("p");o&&(o.style.cssText="margin: 10px 0 15px 0; font-size: 0.95rem; line-height: 1.4;");const r=e.querySelector("button");r&&(r.style.cssText="\n            background: white;\n            color: #d32f2f;\n            border: none;\n            padding: 10px 20px;\n            border-radius: 5px;\n            font-weight: 600;\n            cursor: pointer;\n            font-size: 0.9rem;\n            transition: all 0.2s;\n        ",r.onmouseover=()=>r.style.transform="scale(1.05)",r.onmouseout=()=>r.style.transform="scale(1)");const s=document.createElement("style");s.textContent="\n        @keyframes slideDown {\n            from {\n                opacity: 0;\n                transform: translateX(-50%) translateY(-20px);\n            }\n            to {\n                opacity: 1;\n                transform: translateX(-50%) translateY(0);\n            }\n        }\n    ",document.head.appendChild(s),document.body.appendChild(e),"undefined"!=typeof logger&&logger.error("CSRF warning displayed to user")}fetch("/app/controllers/get_csrf_token.php",{credentials:"same-origin"}).then(n=>n.json()).then(n=>{"success"===n.status?(window.csrfTokenCache=n.token,document.querySelectorAll("form").forEach(e=>{let t=e.querySelector('input[name="csrf_token"]');t||(t=document.createElement("input"),t.type="hidden",t.name="csrf_token",e.appendChild(t)),t.value=n.token}),"undefined"!=typeof logger&&logger.log("CSRF tokens injected")):(console.error("CSRF token fetch failed:",n),showCsrfError("Bezpečnostní token se nepodařilo načíst. Zkontrolujte připojení."))}).catch(n=>{console.error("CSRF Error:",n),showCsrfError("Bezpečnostní token se nepodařilo načíst. Obnovte stránku.")});
//# sourceMappingURL=csrf-auto-inject.min.js.map