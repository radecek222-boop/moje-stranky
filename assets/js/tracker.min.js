!function(){"use strict";function e(){let e=sessionStorage.getItem("wgs_session_id");return e||(e="sess_"+Date.now()+"_"+Math.random().toString(36).substring(2,15),sessionStorage.setItem("wgs_session_id",e)),e}function n(){try{const n={width:screen.width,height:screen.height,resolution:`${screen.width}x${screen.height}`},t={session_id:e(),page_url:window.location.pathname+window.location.search,page_title:document.title||"",referrer:document.referrer||"",screen_resolution:n.resolution,language:navigator.language||"cs",timestamp:(new Date).toISOString()};if(navigator.sendBeacon){const e=new Blob([JSON.stringify(t)],{type:"application/json"});navigator.sendBeacon("/api/track_pageview.php",e)}else fetch("/api/track_pageview.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t),keepalive:!0}).catch(e=>{console.warn("Analytics tracking failed:",e)})}catch(e){console.warn("Analytics tracking error:",e)}}let t=Date.now(),o=Date.now();function a(){o=Date.now()}["click","scroll","keydown","mousemove"].forEach(e=>{document.addEventListener(e,a,{passive:!0,once:!1})}),"complete"===document.readyState?n():window.addEventListener("load",n),window.addEventListener("beforeunload",function(){const n=Math.floor((o-t)/1e3);if(n>2&&n<3600){const t={session_id:e(),page_url:window.location.pathname,duration:n,action:"exit"};if(navigator.sendBeacon){const e=new Blob([JSON.stringify(t)],{type:"application/json"});navigator.sendBeacon("/api/track_pageview.php",e)}}}),console.log("WGS Analytics Tracker loaded")}();