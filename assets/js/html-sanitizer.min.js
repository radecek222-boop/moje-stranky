!function(t){"use strict";function e(t,e={}){if(!t||"string"!=typeof t)return"";const i={allowedTags:e.allowedTags||["div","span","p","br","strong","em","b","i","u","h1","h2","h3","h4","h5","h6","ul","ol","li","table","thead","tbody","tr","td","th","a","img","code","pre","button","input","select","option","textarea","label","form"],allowedAttributes:e.allowedAttributes||{"*":["class","id","style","data-*"],a:["href","title","target"],img:["src","alt","title","width","height"],button:["type","onclick","disabled"],input:["type","name","value","placeholder","required","disabled"],select:["name","required","disabled"],option:["value","selected"],textarea:["name","rows","cols","placeholder","required","disabled"],label:["for"],form:["action","method"]},allowedStyles:e.allowedStyles||["color","background","background-color","padding","margin","width","height","max-width","max-height","border","border-radius","font-size","font-weight","font-family","text-align","text-decoration","display","flex","grid","position","top","left","right","bottom"]},o=document.createElement("div");return o.innerHTML=t,r(o,i),o.innerHTML}function r(t,e){const i=[];Array.from(t.childNodes).forEach(t=>{if(t.nodeType===Node.ELEMENT_NODE){const o=t.tagName.toLowerCase();if(!e.allowedTags.includes(o))return void i.push(t);!function(t,e){const r=t.tagName.toLowerCase(),i=e.allowedAttributes["*"]||[],o=e.allowedAttributes[r]||[],n=[...i,...o],s=[];Array.from(t.attributes).forEach(r=>{const i=r.name.toLowerCase();let o=!1;for(const t of n){if(t===i){o=!0;break}if(t.endsWith("*")){const e=t.slice(0,-1);if(i.startsWith(e)){o=!0;break}}}if(o){if("href"===i||"src"===i){const t=r.value.toLowerCase().trim();(t.startsWith("javascript:")||t.startsWith("data:")&&!t.startsWith("data:image/"))&&s.push(i)}"style"===i&&t.setAttribute("style",function(t,e){if(!t)return"";const r=t.split(";").map(t=>t.trim()).filter(t=>t.length>0),i=[];return r.forEach(t=>{const[r,o]=t.split(":").map(t=>t.trim());if(!r||!o)return;const n=r.toLowerCase();if(e.allowedStyles.includes(n)){const t=o.toLowerCase();t.includes("javascript:")||t.includes("expression(")||t.includes("import")||t.includes("url(javascript:")||i.push(`${r}: ${o}`)}}),i.join("; ")}(r.value,e)),i.startsWith("on")&&(n.includes(i)||s.push(i))}else s.push(i)}),s.forEach(e=>{t.removeAttribute(e)})}(t,e),r(t,e)}else t.nodeType===Node.TEXT_NODE||i.push(t)}),i.forEach(e=>{for(;e.firstChild;)t.insertBefore(e.firstChild,e);t.removeChild(e)})}t.sanitizeHTML=e,t.setInnerHTML=function(t,r,i={}){t&&t instanceof HTMLElement?t.innerHTML=e(r,i):console.error("setInnerHTML: První parametr musí být HTMLElement")},t.escapeHTML=function(t){if(!t||"string"!=typeof t)return"";const e=document.createElement("div");return e.textContent=t,e.innerHTML}}(window);