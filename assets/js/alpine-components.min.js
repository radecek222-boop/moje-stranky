/**
 * Alpine.js komponenty - CSP-safe build
 * Minifikováno pro výkon
 */
document.addEventListener('alpine:init',()=>{Alpine.data('hamburgerMenu',()=>({otevreno:!1,resizeTimer:null,init(){const n=document.getElementById('hamburger-nav'),h=document.getElementById('hamburger-toggle');document.addEventListener('keydown',e=>{e.key==='Escape'&&this.otevreno&&this.zavrit()}),window.addEventListener('resize',()=>{clearTimeout(this.resizeTimer),this.resizeTimer=setTimeout(()=>{window.innerWidth>768&&this.otevreno&&this.zavrit()},250)}),n&&n.querySelectorAll('a').forEach(l=>{l.addEventListener('click',()=>{setTimeout(()=>this.zavrit(),100)})}),h&&h.setAttribute('aria-expanded','false'),n&&n.setAttribute('role','navigation'),window.hamburgerMenu={toggle:()=>this.prepnout(),open:()=>this.otevrit(),close:()=>this.zavrit(),isOpen:()=>this.otevreno},console.log('[hamburgerMenu] Inicializován (Alpine.js CSP-safe)')},prepnout(){this.otevreno?this.zavrit():this.otevrit()},otevrit(){this.otevreno=!0,this.aktualizovatCSS(!0),this.aktualizovatScrollLock(!0)},zavrit(){this.otevreno=!1,this.aktualizovatCSS(!1),this.aktualizovatScrollLock(!1)},aktualizovatCSS(a){const n=document.getElementById('hamburger-nav'),o=document.getElementById('hamburger-overlay'),h=document.getElementById('hamburger-toggle');n&&n.classList.toggle('active',a),o&&o.classList.toggle('active',a),h&&(h.classList.toggle('active',a),h.setAttribute('aria-expanded',a?'true':'false')),a?document.body.classList.add('hamburger-menu-open'):document.body.classList.remove('hamburger-menu-open')},aktualizovatScrollLock(a){window.scrollLock&&(a?window.scrollLock.enable('hamburger-menu'):window.scrollLock.disable('hamburger-menu'))}}));Alpine.data('techProvize',()=>({mesic:'...',castka:'...',async load(){try{const r=await fetch('/api/tech_provize_api.php'),t=await r.json();t.status==='success'?(this.mesic=t.mesic||'---',this.castka=t.provize_celkem||'0.00',console.log('[TechProvize] Načteno (Alpine.js):',t)):console.warn('[TechProvize] Chyba:',t.message)}catch(e){console.error('[TechProvize] Chyba při načítání:',e)}}}));Alpine.data('wgsModal',()=>({open:!1,init(){document.addEventListener('keydown',e=>{e.key==='Escape'&&this.open&&this.close()}),console.log('[wgsModal] Inicializován (Alpine.js CSP-safe)')},toggle(){this.open=!this.open,this.updateScrollLock()},openModal(){this.open=!0,this.updateScrollLock()},close(){this.open=!1,this.updateScrollLock()},updateScrollLock(){this.open?window.scrollLock?.enable('wgs-modal'):window.scrollLock?.disable('wgs-modal')}}));Alpine.data('rememberMeModal',()=>({open:!1,init(){document.addEventListener('keydown',e=>{e.key==='Escape'&&this.open&&this.cancel()}),console.log('[rememberMeModal] Inicializován (Alpine.js CSP-safe)')},onCheckboxChange(e){e.target.checked&&this.show()},show(){this.open=!0;const o=document.getElementById('rememberMeOverlay');o&&o.classList.add('active'),window.scrollLock&&window.scrollLock.enable('remember-me-modal')},confirm(){this.open=!1;const o=document.getElementById('rememberMeOverlay');o&&o.classList.remove('active'),window.scrollLock&&window.scrollLock.disable('remember-me-modal')},cancel(){const c=document.getElementById('rememberMe');c&&(c.checked=!1),this.open=!1;const o=document.getElementById('rememberMeOverlay');o&&o.classList.remove('active'),window.scrollLock&&window.scrollLock.disable('remember-me-modal')},overlayClick(e){e.target.id==='rememberMeOverlay'&&this.cancel()}}));Alpine.data('provedeniModal',()=>({open:!1,init(){document.addEventListener('keydown',e=>{e.key==='Escape'&&this.open&&this.close()}),console.log('[provedeniModal] Inicializován (Alpine.js CSP-safe)')},openModal(){this.open=!0;const o=document.getElementById('provedeniOverlay');o&&o.classList.add('active')},close(){this.open=!1;const o=document.getElementById('provedeniOverlay');o&&o.classList.remove('active')},overlayClick(e){e.target.id==='provedeniOverlay'&&this.close()},selectProvedeni(e){const c=e.currentTarget,v=c.dataset.value,p=document.getElementById('provedeni');p&&(p.value=v),this.close(),typeof WGSFormController!='undefined'&&WGSFormController.toast&&WGSFormController.toast('Provedení: '+v,'info')}}));Alpine.data('calendarModal',()=>({open:!1,init(){document.addEventListener('keydown',e=>{e.key==='Escape'&&this.open&&this.close()}),window.calendarModal={open:()=>this.openModal(),close:()=>this.close(),isOpen:()=>this.open},console.log('[calendarModal] Inicializován (Alpine.js CSP-safe)')},openModal(){this.open=!0;const o=document.getElementById('calendarOverlay');o&&o.classList.add('active')},close(){this.open=!1;const o=document.getElementById('calendarOverlay');o&&o.classList.remove('active')},overlayClick(e){e.target.id==='calendarOverlay'&&this.close()}}));Alpine.data('calculatorModal',()=>({open:!1,init(){document.addEventListener('keydown',e=>{e.key==='Escape'&&this.open&&this.close()}),window.calculatorModal={open:()=>this.openModal(),close:()=>this.close(),isOpen:()=>this.open},console.log('[calculatorModal] Inicializován (Alpine.js CSP-safe)')},openModal(){this.open=!0;const o=document.getElementById('calculatorModalOverlay');o&&(o.style.display='flex')},close(){this.open=!1;const o=document.getElementById('calculatorModalOverlay');o&&(o.style.display='none')},overlayClick(e){e.target.id==='calculatorModalOverlay'&&this.close()}}));Alpine.data('zakaznikSchvaleniModal',()=>({open:!1,init(){document.addEventListener('keydown',e=>{e.key==='Escape'&&this.open&&this.close()}),window.zakaznikSchvaleniModal={open:()=>this.openModal(),close:()=>this.close(),isOpen:()=>this.open},console.log('[zakaznikSchvaleniModal] Inicializován (Alpine.js CSP-safe)')},openModal(){this.open=!0;const o=document.getElementById('zakaznikSchvaleniOverlay');o&&(o.style.display='flex'),window.scrollLock&&window.scrollLock.enable('zakaznik-schvaleni-overlay')},close(){this.open=!1;const o=document.getElementById('zakaznikSchvaleniOverlay');o&&(o.style.display='none'),window.scrollLock&&window.scrollLock.disable('zakaznik-schvaleni-overlay')},overlayClick(e){e.target.id==='zakaznikSchvaleniOverlay'&&this.close()}}));Alpine.data('pdfPreviewModal',()=>({open:!1,init(){document.addEventListener('keydown',e=>{e.key==='Escape'&&this.open&&this.close()}),window.pdfPreviewModal={open:()=>this.openModal(),close:()=>this.close(),isOpen:()=>this.open},console.log('[pdfPreviewModal] Inicializován (Alpine.js CSP-safe)')},openModal(){this.open=!0;const o=document.getElementById('pdfPreviewOverlay');o&&o.classList.add('active')},close(){this.open=!1,typeof zavritPdfPreview=='function'?zavritPdfPreview():document.getElementById('pdfPreviewOverlay')?.classList.remove('active')},overlayClick(e){e.target.id==='pdfPreviewOverlay'&&this.close()}}));Alpine.data('detailModal',()=>({open:!1,init(){document.addEventListener('keydown',e=>{e.key==='Escape'&&this.open&&this.close()}),window.detailModal={open:()=>this.openModal(),close:()=>this.close(),isOpen:()=>this.open},console.log('[detailModal] Inicializován (Alpine.js CSP-safe)')},openModal(){this.open=!0;const o=document.getElementById('detailOverlay');o&&o.classList.add('active'),window.scrollLock&&window.scrollLock.enable('detail-overlay'),document.body.classList.add('modal-open')},close(){this.open=!1;const o=document.getElementById('detailOverlay');o&&o.classList.remove('active'),setTimeout(()=>{document.body.classList.remove('modal-open'),window.scrollLock&&window.scrollLock.disable('detail-overlay')},50)},overlayClick(e){e.target.id==='detailOverlay'&&this.close()}}));Alpine.data('notifModal',()=>({open:!1,init(){document.addEventListener('keydown',e=>{e.key==='Escape'&&this.open&&this.close()}),window.notifModal={open:()=>this.openModal(),close:()=>this.close(),isOpen:()=>this.open},console.log('[notifModal] Inicializován (Alpine.js CSP-safe)')},openModal(){this.open=!0;const o=document.getElementById('notifModalOverlay'),m=o?.querySelector('.cc-modal');o&&o.classList.add('active'),m&&m.classList.add('active'),document.body.style.overflow='hidden'},close(){this.open=!1;const o=document.getElementById('notifModalOverlay'),m=o?.querySelector('.cc-modal');o&&o.classList.remove('active'),m&&m.classList.remove('active'),document.body.style.overflow='auto'},overlayClick(e){e.target.id==='notifModalOverlay'&&this.close()}}));Alpine.data('adminModal',()=>({open:!1,init(){document.addEventListener('keydown',e=>{e.key==='Escape'&&this.open&&this.close()}),window.adminModal={open:()=>this.openModal(),close:()=>this.close(),isOpen:()=>this.open},console.log('[adminModal] Inicializován (Alpine.js CSP-safe)')},openModal(){this.open=!0;const o=document.getElementById('adminOverlay'),m=document.getElementById('adminModal');o&&o.classList.add('active'),m&&m.classList.add('active'),window.scrollLock&&window.scrollLock.enable('admin-modal')},close(){this.open=!1;const o=document.getElementById('adminOverlay'),m=document.getElementById('adminModal');o&&o.classList.remove('active'),m&&m.classList.remove('active'),window.scrollLock&&window.scrollLock.disable('admin-modal')},overlayClick(e){e.target.id==='adminOverlay'&&this.close()}}))});
