!function(){"use strict";const e=window.matchMedia("(display-mode: standalone)").matches||!0===window.navigator.standalone,n=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);if(!e&&!n)return;let t=0,r=0,o=!1,s=null,i=null,l=!1;function a(){return window.scrollY<=0}function d(){if(window.scrollLock&&window.scrollLock.isLocked&&window.scrollLock.isLocked())return!0;if(document.body.classList.contains("scroll-locked")||document.body.classList.contains("modal-open")||document.body.classList.contains("hamburger-menu-open")||document.body.classList.contains("detail-open"))return!0;const e=getComputedStyle(document.documentElement),n=getComputedStyle(document.body);if("hidden"===e.overflow||"hidden"===n.overflow)return!0;const t=["#detailOverlay.active","#detailOverlay:not(.hidden)","#calendarOverlay.active","#calendarOverlay:not(.hidden)","#notesModal:not(.hidden)","#pdfPreviewOverlay:not(.hidden)",".modal-overlay.active",".cc-modal-overlay.active",".recovery-overlay",".newkey-overlay"];for(const e of t)try{const n=document.querySelector(e);if(n){const e=getComputedStyle(n);if("none"!==e.display&&"hidden"!==e.visibility)return!0}}catch(e){}return!1}function c(e){d()||function(e){let n=e;for(;n&&n!==document.body;){const e=getComputedStyle(n);if(("auto"===e.overflowY||"scroll"===e.overflowY)&&n.scrollHeight>n.clientHeight)return!0;n=n.parentElement}return!1}(e.target)||a()&&(t=e.touches[0].clientY,r=t,o=!1,i=null,l=!1,s.style.transition="none")}function u(e){if(d())return;if(!a())return;r=e.touches[0].clientY;const n=r-t;if(!o&&n>30&&(o=!0),!o)return;const c=Math.min(n-30,160);if(c>0){e.preventDefault();const n=c*.5+Math.min(.3*c,30);s.style.height=n+"px";const t=s.querySelector(".pull-refresh-content"),r=s.querySelector(".pull-refresh-spinner"),o=s.querySelector(".pull-refresh-spinner circle"),a=s.querySelector(".pull-refresh-text");n>20&&t.classList.add("visible");const d=126-126*Math.min(c/120,1);if(o.style.strokeDashoffset=d,document.body.style.transform=`translateY(${n}px)`,document.body.style.transition="none",c>=120){null===i&&(i=Date.now(),r.classList.add("holding"),r.classList.remove("ready"),a.textContent="Podrz...",a.classList.remove("ready"));Date.now()-i>=400&&!l&&(l=!0,r.classList.remove("holding"),r.classList.add("ready"),a.textContent="Uvolni pro aktualizaci",a.classList.add("ready"),navigator.vibrate&&navigator.vibrate(10))}else i=null,l=!1,r.classList.remove("ready","holding"),a.textContent="Potahni dolu",a.classList.remove("ready")}}function f(){if(!o)return t=0,void(r=0);o=!1,s.style.transition="height 0.3s ease",document.body.style.transition="transform 0.3s ease";const e=s.querySelector(".pull-refresh-content"),n=s.querySelector(".pull-refresh-spinner"),a=s.querySelector(".pull-refresh-text");l?(n.classList.remove("ready","holding"),n.classList.add("loading"),a.textContent="Aktualizuji...",a.classList.remove("ready"),s.style.height="70px",document.body.style.transform="translateY(70px)",setTimeout(()=>{window.location.reload()},500)):(s.style.height="0",document.body.style.transform="translateY(0)",n.classList.remove("ready","holding","loading"),a.classList.remove("ready"),setTimeout(()=>{const n=s.querySelector(".pull-refresh-spinner circle");n&&(n.style.strokeDashoffset="126"),e.classList.remove("visible")},300)),t=0,r=0,i=null,l=!1}function h(){!function(){s=document.createElement("div"),s.id="pull-refresh-indicator",s.innerHTML='\n      <div class="pull-refresh-content">\n        <div class="pull-refresh-spinner">\n          <svg viewBox="0 0 50 50">\n            <circle cx="25" cy="25" r="20" fill="none" stroke-width="4"></circle>\n          </svg>\n        </div>\n        <span class="pull-refresh-text">Potahni dolu</span>\n      </div>\n    ',s.style.cssText="\n      position: fixed;\n      top: 0;\n      left: 0;\n      right: 0;\n      height: 0;\n      background: linear-gradient(to bottom, #f0f0f0, #e8e8e8);\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      overflow: hidden;\n      z-index: 10003;\n      transition: none;\n      box-shadow: 0 2px 8px rgba(0,0,0,0.1);\n    ";const e=document.createElement("style");e.textContent="\n      #pull-refresh-indicator .pull-refresh-content {\n        display: flex;\n        flex-direction: column;\n        align-items: center;\n        gap: 0.4rem;\n        opacity: 0;\n        transform: scale(0.8);\n        transition: opacity 0.2s, transform 0.2s;\n      }\n      #pull-refresh-indicator .pull-refresh-content.visible {\n        opacity: 1;\n        transform: scale(1);\n      }\n      #pull-refresh-indicator .pull-refresh-spinner {\n        width: 32px;\n        height: 32px;\n      }\n      #pull-refresh-indicator .pull-refresh-spinner svg {\n        width: 100%;\n        height: 100%;\n        transform: rotate(-90deg);\n      }\n      #pull-refresh-indicator .pull-refresh-spinner circle {\n        stroke: #333;\n        stroke-dasharray: 126;\n        stroke-dashoffset: 126;\n        stroke-linecap: round;\n        transition: stroke-dashoffset 0.05s linear;\n      }\n      #pull-refresh-indicator .pull-refresh-spinner.holding circle {\n        stroke: #666;\n        animation: ptr-pulse 0.5s ease-in-out infinite;\n      }\n      #pull-refresh-indicator .pull-refresh-spinner.ready circle {\n        stroke-dashoffset: 0;\n        stroke: #222;\n      }\n      #pull-refresh-indicator .pull-refresh-spinner.loading svg {\n        animation: ptr-spin 0.8s linear infinite;\n        transform: rotate(0deg);\n      }\n      #pull-refresh-indicator .pull-refresh-spinner.loading circle {\n        stroke-dashoffset: 90;\n        stroke: #333;\n        animation: ptr-dash 1.2s ease-in-out infinite;\n      }\n      @keyframes ptr-spin {\n        100% { transform: rotate(360deg); }\n      }\n      @keyframes ptr-dash {\n        0% { stroke-dashoffset: 90; }\n        50% { stroke-dashoffset: 30; }\n        100% { stroke-dashoffset: 90; }\n      }\n      @keyframes ptr-pulse {\n        0%, 100% { opacity: 1; }\n        50% { opacity: 0.6; }\n      }\n      #pull-refresh-indicator .pull-refresh-text {\n        font-size: 0.7rem;\n        color: #555;\n        font-family: 'Poppins', -apple-system, sans-serif;\n        font-weight: 500;\n        letter-spacing: 0.02em;\n        transition: color 0.2s;\n      }\n      #pull-refresh-indicator .pull-refresh-text.ready {\n        color: #222;\n        font-weight: 600;\n      }\n    ",document.head.appendChild(e),document.body.insertBefore(s,document.body.firstChild)}(),document.addEventListener("touchstart",c,{passive:!0}),document.addEventListener("touchmove",u,{passive:!1}),document.addEventListener("touchend",f,{passive:!0})}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",h):h()}();