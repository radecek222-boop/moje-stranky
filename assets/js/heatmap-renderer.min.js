!function(){"use strict";const t={canvas:null,ctx:null,config:{radius:30,blur:20,maxIntensity:100,gradient:{0:"rgba(0, 0, 255, 0)",.2:"rgba(0, 255, 255, 0.5)",.4:"rgba(0, 255, 0, 0.7)",.6:"rgba(255, 255, 0, 0.8)",.8:"rgba(255, 128, 0, 0.9)",1:"rgba(255, 0, 0, 1)"}},init:function(t){return this.canvas=document.getElementById(t),this.canvas?(this.ctx=this.canvas.getContext("2d"),!0):(console.error("[Heatmap Renderer] Canvas nenalezen:",t),!1)},renderClickHeatmap:function(t){if(!this.ctx)return void console.error("[Heatmap Renderer] Canvas není inicializován");if(this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),!t.points||0===t.points.length)return void console.warn("[Heatmap Renderer] Žádné click body k zobrazení");const e=Math.max(...t.points.map(t=>t.count));t.points.forEach(t=>{const n=t.x/100*this.canvas.width,a=t.y/100*this.canvas.height,i=t.count/e;this.drawHeatPoint(n,a,i)}),this.applyGradient()},renderScrollHeatmap:function(t){if(!this.ctx)return void console.error("[Heatmap Renderer] Canvas není inicializován");if(this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),!t.buckets||0===t.buckets.length)return void console.warn("[Heatmap Renderer] Žádné scroll buckets k zobrazení");const e=this.canvas.height/10;t.buckets.forEach(t=>{const n=t.depth/10*e,a=t.percentage/100,i=this.getColorForIntensity(a);this.ctx.fillStyle=`rgba(${i.r}, ${i.g}, ${i.b}, ${i.a/255})`,this.ctx.fillRect(0,n,this.canvas.width,e)})},drawHeatPoint:function(t,e,n){const a=this.ctx.createRadialGradient(t,e,0,t,e,this.config.radius),i=Math.min(.8*n,.8);a.addColorStop(0,`rgba(0, 0, 0, ${i})`),a.addColorStop(1,"rgba(0, 0, 0, 0)"),this.ctx.fillStyle=a,this.ctx.fillRect(t-this.config.radius,e-this.config.radius,2*this.config.radius,2*this.config.radius)},applyGradient:function(){const t=this.ctx.getImageData(0,0,this.canvas.width,this.canvas.height),e=t.data;for(let t=0;t<e.length;t+=4){const n=e[t+3];if(n>0){const a=n/255,i=this.getColorForIntensity(a);e[t]=i.r,e[t+1]=i.g,e[t+2]=i.b,e[t+3]=i.a}}this.ctx.putImageData(t,0,0)},getColorForIntensity:function(t){const e=Object.keys(this.config.gradient).map(Number).sort((t,e)=>t-e);for(let n=0;n<e.length-1;n++)if(t>=e[n]&&t<=e[n+1]){const a=e[n],i=e[n+1],r=(t-a)/(i-a),o=this.parseColor(this.config.gradient[a]),s=this.parseColor(this.config.gradient[i]);return{r:Math.round(o.r+(s.r-o.r)*r),g:Math.round(o.g+(s.g-o.g)*r),b:Math.round(o.b+(s.b-o.b)*r),a:Math.round(o.a+(s.a-o.a)*r)}}return{r:0,g:0,b:0,a:0}},parseColor:function(t){const e=t.match(/rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*([\d.]+))?\)/);return e?{r:parseInt(e[1]),g:parseInt(e[2]),b:parseInt(e[3]),a:e[4]?Math.round(255*parseFloat(e[4])):255}:{r:0,g:0,b:0,a:0}},renderLegend:function(t){const e=document.getElementById(t);if(!e)return void console.error("[Heatmap Renderer] Legend container nenalezen:",t);e.innerHTML="";const n=document.createElement("canvas");n.width=20,n.height=200;const a=n.getContext("2d"),i=a.createLinearGradient(0,200,0,0);Object.entries(this.config.gradient).forEach(([t,e])=>{i.addColorStop(parseFloat(t),e)}),a.fillStyle=i,a.fillRect(0,0,20,200);const r=document.createElement("div");r.style.cssText="position: absolute; right: 30px; height: 200px; display: flex; flex-direction: column; justify-content: space-between;";["Vysoká","Střední","Nízká"].forEach(t=>{const e=document.createElement("div");e.textContent=t,e.style.cssText="font-size: 12px; color: #333;",r.appendChild(e)}),e.style.position="relative",e.appendChild(n),e.appendChild(r)},exportToPNG:function(t="heatmap.png"){if(!this.canvas)return void console.error("[Heatmap Renderer] Canvas není inicializován");const e=document.createElement("a");e.download=t,e.href=this.canvas.toDataURL("image/png"),e.click()}};window.HeatmapRenderer=t}();
//# sourceMappingURL=heatmap-renderer.min.js.map