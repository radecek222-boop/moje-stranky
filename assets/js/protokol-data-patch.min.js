!function(){const e="undefined"!=typeof window&&window.logger?window.logger:console,t=document.getElementById("initialReklamaceData");function a(t,...a){if(!e)return;const o="function"==typeof e[t]?e[t]:e.log;"function"==typeof o&&o.apply(e,a)}let o=null,n=null;if(t){const e=(t.textContent||t.innerText||"").trim();if(e)try{o=JSON.parse(e),n="DOM",a("log","Data naÄtena z DOM (initialReklamaceData)")}catch(e){a("error","JSON parse z DOM selhal",e)}}if(!o)try{const e=localStorage.getItem("currentCustomer");e&&(o=JSON.parse(e),n="localStorage",a("log","Data naÄtena z localStorage (currentCustomer)"))}catch(e){a("warn","NepodaÅ™ilo se naÄÃ­st localStorage",e)}if(!o||"object"!=typeof o)return void a("warn","Å½Ã¡dnÃ¡ data k dispozici (ani DOM ani localStorage)");const r=e=>{if(e.adresa)return e.adresa;return[e.ulice,e.mesto,e.psc].map(e=>(e||"").toString().trim()).filter(Boolean).join(", ")},l=[(c=o).reklamace_id,c.cislo,c.id].map(e=>(e??"").toString().trim()).find(e=>e.length>0)||"";var c;window.__INITIAL_REKLAMACE__=o;try{localStorage.setItem("currentCustomer",JSON.stringify(o))}catch(e){a("warn","NepodaÅ™ilo se uloÅ¾it data zÃ¡kaznÃ­ka do localStorage",e)}window.currentReklamace=window.currentReklamace||o,l&&!window.currentReklamaceId&&(window.currentReklamaceId=l);const i=()=>{const e={"order-number":o.reklamace_id||"","claim-number":o.cislo||"",customer:o.jmeno||o.zakaznik||"",address:r(o),phone:o.telefon||"",email:o.email||"",brand:o.znacka||o.model||"",model:o.model||"","description-cz":o.popis_problemu||""};Object.entries(e).forEach(([e,t])=>{const a=document.getElementById(e);a&&!a.value&&(a.value=t||"")});const t=document.getElementById("fakturace-firma");if(t&&!t.value&&o.fakturace_firma){const e=o.fakturace_firma.toString().trim().toUpperCase();t.value="CZ"===e?"ğŸ‡¨ğŸ‡¿ ÄŒeskÃ¡ republika (CZ)":"SK"===e?"ğŸ‡¸ğŸ‡° Slovensko (SK)":o.fakturace_firma}const a=document.getElementById("technician");if(a&&o.technik){const e=o.technik.toString().trim(),t=Array.from(a.options).find(t=>t.value===e||t.text===e);if(t)a.value=t.value;else{const t=document.createElement("option");t.value=e,t.text=e,t.selected=!0,a.add(t)}}const n=document.getElementById("delivery-date");n&&o.datum_prodeje&&(n.value=o.datum_prodeje);const l=document.getElementById("claim-date");l&&o.datum_reklamace&&(l.value=o.datum_reklamace)};"loading"===document.readyState?document.addEventListener("DOMContentLoaded",i,{once:!0}):i();const d=()=>{if("function"!=typeof window.loadReklamace)return d._attempts=(d._attempts||0)+1,d._attempts>40?void a("warn","loadReklamace stÃ¡le nenÃ­ dostupnÃ¡, pÅ™eskoÄeno"):void setTimeout(d,50);const e=window.loadReklamace;window.loadReklamace=async function(t){const o=(t||"").toString().trim();let n;if(!o&&l)a("info","â„¹ï¸ Protokol data patch: doplÅˆuji ID z bootstrap payloadu"),i(),n=await e.call(this,l);else if(l&&o&&o===l){i();try{n=await e.apply(this,arguments)}catch(e){return a("warn","PÅ¯vodnÃ­ loadReklamace selhal, zachovÃ¡vÃ¡m bootstrap data",e),null}}else try{n=await e.apply(this,arguments)}catch(e){return a("warn","PÅ¯vodnÃ­ loadReklamace selhal",e),null}return setTimeout(()=>{(e=>{const t=document.getElementById("fakturace-firma");if(!t)return;const o=(e.fakturace_firma||"cz").toString().trim().toUpperCase();"CZ"===o?t.value="ğŸ‡¨ğŸ‡¿ ÄŒeskÃ¡ republika (CZ)":"SK"===o&&(t.value="ğŸ‡¸ğŸ‡° Slovensko (SK)"),a("log",`Fakturace nastavena: ${o}`)})(window.currentReklamace||JSON.parse(localStorage.getItem("currentCustomer")||"{}"))},100),n},a("log","Protokol data patch aktivovÃ¡n (vÄetnÄ› fakturace)")};d()}();