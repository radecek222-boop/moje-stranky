function escapeHtml(e){if(!e)return"";const t=document.createElement("div");return t.textContent=e,t.innerHTML}async function showWelcomeModal(e,t){try{const n=escapeHtml(e),o=await fetch("api/get_user_stats.php?t="+Date.now());let s="";if(o.ok){const e=await o.json();if("success"===e.status){const t=e.stats;let n="";t.notifications&&t.notifications>0&&(n=`\n            <div class="stat-item stat-notifications">\n              <div class="stat-label">NEPŘEČTENÝCH POZNÁMEK</div>\n              <div class="stat-number">${t.notifications}</div>\n            </div>\n          `),s=`\n          <div class="welcome-stats">\n            <div class="stat-item">\n              <div class="stat-label">NEVYŘEŠENÝCH REKLAMACÍ</div>\n              <div class="stat-number">${t.nevyreseno}</div>\n            </div>\n            <div class="stat-item">\n              <div class="stat-label">DOKONČENÝCH REKLAMACÍ</div>\n              <div class="stat-number">${t.hotovo}</div>\n            </div>\n            <div class="stat-item">\n              <div class="stat-label">CELKEM REKLAMACÍ</div>\n              <div class="stat-number">${t.total}</div>\n            </div>\n            ${n}\n          </div>\n        `}}const a=`\n      <div class="welcome-modal-overlay" id="welcomeModal">\n        <div class="welcome-modal">\n          <h1 class="welcome-title">Vítej!</h1>\n          <div class="welcome-name">${n}</div>\n          <p class="welcome-message">\n            Přejeme ti produktivní a příjemný pracovní den.\n          </p>\n          ${s}\n          <button class="welcome-close-btn" id="welcomeCloseBtn">\n            Začít pracovat\n          </button>\n        </div>\n      </div>\n    `;document.body.insertAdjacentHTML("beforeend",a),document.getElementById("welcomeCloseBtn").addEventListener("click",()=>{closeWelcomeModal(t||"user")}),setTimeout(()=>{document.getElementById("welcomeModal").classList.add("active")},100)}catch(n){console.error("Chyba při načítání welcome modalu:",n),zobrazZalohaModal(e,t)}}function zobrazZalohaModal(e,t){const n=`\n    <div class="welcome-modal-overlay" id="welcomeModal">\n      <div class="welcome-modal">\n        <h1 class="welcome-title">Vítej!</h1>\n        <div class="welcome-name">${escapeHtml(e)}</div>\n        <p class="welcome-message">\n          Přejeme ti produktivní a příjemný pracovní den.\n        </p>\n        <button class="welcome-close-btn" id="welcomeCloseBtn">\n          Začít pracovat\n        </button>\n      </div>\n    </div>\n  `;document.body.insertAdjacentHTML("beforeend",n),document.getElementById("welcomeCloseBtn").addEventListener("click",()=>{closeWelcomeModal(t||"user")}),setTimeout(()=>{document.getElementById("welcomeModal").classList.add("active")},100)}function closeWelcomeModal(e){const t=document.getElementById("welcomeModal");t&&(t.classList.remove("active"),setTimeout(()=>{t.remove();const n=(e||"").toLowerCase().trim();window.location.href="technik"===n||"technician"===n?"seznam.php":"novareklamace.php"},300))}window.showWelcomeModal=showWelcomeModal;
//# sourceMappingURL=welcome-modal.min.js.map