{"version":3,"names":["notificationState","notifications","currentEditing","ccEmails","bccEmails","ADMIN_SESSION_EXPIRED_MESSAGE","redirectToAdminLogin","tab","redirectTarget","window","location","href","encodeURIComponent","handleNotificationsUnauthorized","response","container","status","innerHTML","wgsToast","error","setTimeout","async","loadNotifications","document","getElementById","res","fetch","credentials","result","ok","json","parseErr","message","Error","data","renderNotifications","err","console","length","map","notif","recipientName","customer","admin","technician","seller","recipient_type","typeName","type","safeName","Utils","escapeHtml","name","safeDescription","description","safeTrigger","trigger_event","safeSubject","subject","safeTemplate","template","replace","id","active","join","toggleNotificationBody","notificationId","openEditNotificationModal","toggleNotification","find","n","newActive","csrfToken","getCSRFToken","method","headers","body","JSON","stringify","notification_id","csrf_token","text","initNotifications","urlParams","URLSearchParams","search","hasContainer","get","textContent","value","variablesContainer","variables","v","cc_emails","bcc_emails","renderCCEmails","renderBCCEmails","updateTemplatePreview","modal","style","display","position","top","left","width","height","alignItems","justifyContent","zIndex","closeEditNotificationModal","insertVariable","variable","textarea","start","selectionStart","end","selectionEnd","substring","focus","setSelectionRange","preview","previewText","attachTemplateListener","templateInput","addEventListener","saveNotificationTemplate","errorDiv","successDiv","recipient","trim","addCCEmail","input","email","match","includes","warning","push","removeCCEmail","filter","e","addBCCEmail","removeBCCEmail","addModalStyles","createElement","head","appendChild","readyState","registerAction","el"],"sources":["admin-notifications.js"],"mappings":"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","ignoreList":[]}